# binance-transactions

å¸å®‰äº¤æ˜“è®°å½•è·å–å™¨ï¼Œç”¨äºè·å–å¸å®‰è´¦æˆ·çš„äº¤æ˜“è®°å½•å¹¶æ•´ç†æˆpyfolioæ ¼å¼ã€‚

## åŠŸèƒ½ç‰¹æ€§

1. ğŸ” å®‰å…¨çš„APIå¯†é’¥ç®¡ç†ï¼ˆé€šè¿‡.envæ–‡ä»¶ï¼‰
2. ğŸ“Š ä½¿ç”¨ccxtè·å–å¸å®‰äº¤æ˜“è®°å½•
3. ğŸ“ˆ æ•´ç†returns, transactions, positionsæ•°æ®ï¼Œç¬¦åˆpyfolioæ ¼å¼
4. ğŸ’¾ è‡ªåŠ¨ä¿å­˜æ•°æ®åˆ°CSVæ–‡ä»¶
5. ğŸ“‹ è¯¦ç»†çš„æ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç†
6. ğŸ¯ æ”¯æŒç‰¹å®šäº¤æ˜“å¯¹åˆ†æ
7. ğŸ§ª æ”¯æŒæµ‹è¯•ç½‘å’Œç”Ÿäº§ç¯å¢ƒ

## å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

æˆ–è€…æ‰‹åŠ¨å®‰è£…ï¼š

```bash
pip install ccxt pandas numpy python-dotenv
```

**Python 3.10å…¼å®¹æ€§è¯´æ˜**ï¼š
- æœ¬é¡¹ç›®å·²é’ˆå¯¹Python 3.10.10è¿›è¡Œä¼˜åŒ–
- pyfolioåº“ä¸Python 3.10+å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œå·²ç§»é™¤
- ç¨‹åºä»ä¼šç”Ÿæˆç¬¦åˆpyfolioæ ¼å¼çš„CSVæ–‡ä»¶ï¼Œå¯ç”¨äºå…¶ä»–åˆ†æå·¥å…·
- æ¨èä½¿ç”¨quantstatsä½œä¸ºpyfolioçš„æ›¿ä»£æ–¹æ¡ˆè¿›è¡ŒæŠ•èµ„ç»„åˆåˆ†æ

**æ³¨æ„**ï¼šå¦‚æœé‡åˆ°ä¾èµ–å®‰è£…é—®é¢˜ï¼Œè¯·å°è¯•å‡çº§pipï¼š
```bash
pip install --upgrade pip
```

## é…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„å¸å®‰APIå¯†é’¥ï¼š
```env
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here

# å¯é€‰ï¼šä½¿ç”¨æµ‹è¯•ç½‘
# BINANCE_TESTNET=true
```

**é‡è¦æç¤º**ï¼š
- å¸å®‰æµ‹è¯•ç½‘éœ€è¦å•ç‹¬çš„æµ‹è¯•ç½‘APIå¯†é’¥
- æµ‹è¯•ç½‘åœ°å€ï¼šhttps://testnet.binance.vision/
- æµ‹è¯•ç½‘APIå¯†é’¥ä¸ä¸»ç½‘APIå¯†é’¥ä¸åŒï¼Œéœ€è¦å•ç‹¬ç”³è¯·
- å¦‚æœè®¾ç½® `BINANCE_TESTNET=true`ï¼Œè¯·ç¡®ä¿ä½¿ç”¨çš„æ˜¯æµ‹è¯•ç½‘APIå¯†é’¥

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```bash
python binance_transactions.py
```

### è¿è¡Œç¤ºä¾‹

```bash
python example_usage.py
```

### å…¼å®¹æ€§æµ‹è¯•

åœ¨è¿è¡Œä¸»ç¨‹åºä¹‹å‰ï¼Œå»ºè®®å…ˆè¿è¡Œå…¼å®¹æ€§æµ‹è¯•ï¼š

```bash
python test_compatibility.py
```

è¿™å°†éªŒè¯Python 3.10å…¼å®¹æ€§å’Œæ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚

### ç¼–ç¨‹ä½¿ç”¨

```python
from binance_transactions import BinanceTransactions

# åˆ›å»ºåˆ†æå™¨å®ä¾‹
analyzer = BinanceTransactions()

# è·å–æœ€è¿‘30å¤©çš„æ‰€æœ‰äº¤æ˜“æ•°æ®
results = analyzer.run_analysis(days=30)

# è®¿é—®ç»“æœ
transactions = results['transactions']
positions = results['positions']
returns = results['returns']
```

## è¾“å‡ºæ–‡ä»¶

ç¨‹åºè¿è¡Œåä¼šç”Ÿæˆä»¥ä¸‹CSVæ–‡ä»¶ï¼š

- `transactions_pyfolio.csv` - äº¤æ˜“è®°å½•ï¼ˆpyfolioæ ¼å¼ï¼‰
- `positions_pyfolio.csv` - æŒä»“ä¿¡æ¯ï¼ˆpyfolioæ ¼å¼ï¼‰
- `returns_pyfolio.csv` - æ”¶ç›Šç‡åºåˆ—ï¼ˆpyfolioæ ¼å¼ï¼‰
- `binance_trader.log` - è¿è¡Œæ—¥å¿—

## æ•°æ®æ ¼å¼

### äº¤æ˜“è®°å½•æ ¼å¼
| date | txn_volume | txn_shares |
|------|--------|--------|
transactions.tail()
	txn_volume	txn_shares
2009-12-24 00:00:00+00:00	29064.589481	1381
2009-12-28 00:00:00+00:00	8794.514054	405
2009-12-29 00:00:00+00:00	49996.978324	1765
2009-12-30 00:00:00+00:00	157158.874704	9233
2009-12-31 00:00:00+00:00	189609.809608	11946

### æŒä»“ä¿¡æ¯æ ¼å¼

positions.tail()
	AMD	CERN	COST	DELL	GPS	INTC	MMM	cash
index								
2009-12-24 00:00:00+00:00	0.00	0.00000	28116.291654	0.00000	86022.143403	40522.266140	17288.084400	261.648675
2009-12-28 00:00:00+00:00	0.00	0.00000	26444.895165	0.00000	91778.156400	38402.193192	17039.652084	-46.731967
2009-12-29 00:00:00+00:00	0.00	0.00000	18547.461768	0.00000	108639.828380	47874.339058	0.000000	-153.847015
2009-12-30 00:00:00+00:00	3178.44	0.00000	31364.795616	63294.65464	53188.785870	26018.584921	0.000000	-1705.100847
2009-12-31 00:00:00+00:00	44363.44	20816.10101	63315.443592	18114.05960	26346.752400	0.000000	0.000000	-944.218331
### æ”¶ç›Šç‡æ ¼å¼
| date | return |
|------|--------|
returns.tail()
2009-12-24 00:00:00+00:00    0.000989
2009-12-28 00:00:00+00:00    0.008174
2009-12-29 00:00:00+00:00    0.007428
2009-12-30 00:00:00+00:00    0.002472
2009-12-31 00:00:00+00:00   -0.018984
Name: returns, dtype: float64
## é«˜çº§ç”¨æ³•

### åˆ†æç‰¹å®šäº¤æ˜“å¯¹

```python
# åªåˆ†æBTC/USDT
results = analyzer.run_analysis(symbol='BTC/USDT', days=7)
```

### æ‰‹åŠ¨è·å–æ•°æ®

```python
# è·å–äº¤æ˜“è®°å½•
transactions = analyzer.get_all_transactions(symbol='BTC/USDT', days=30)

# è·å–æŒä»“ä¿¡æ¯
positions = analyzer.get_positions()

# è½¬æ¢ä¸ºpyfolioæ ¼å¼
transactions_df = analyzer.transactions_to_pyfolio_format(transactions)
positions_df = analyzer.positions_to_pyfolio_format(positions)
```

## æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æé†’**

- æœ¬ç¨‹åºä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚
- æœ¬ç¨‹åºä¸ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ï¼Œä½¿ç”¨æœ¬ç¨‹åºäº§ç”Ÿçš„ä»»ä½•åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚
- æœ¬ç¨‹åºä¸ä¿è¯æ•°æ®çš„å®æ—¶æ€§ï¼Œæ•°æ®å¯èƒ½ä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿã€‚
- è¯·å¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦æ³„éœ²ç»™ä»–äººã€‚
- å»ºè®®ä½¿ç”¨å…·æœ‰åªè¯»æƒé™çš„APIå¯†é’¥ã€‚
- åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œå»ºè®®å…ˆåœ¨æµ‹è¯•ç½‘æµ‹è¯•ã€‚

## APIæƒé™

å»ºè®®ä¸ºAPIå¯†é’¥è®¾ç½®ä»¥ä¸‹æƒé™ï¼š

- è¯»å–è´¦æˆ·ä¿¡æ¯
- è¯»å–äº¤æ˜“å†å²
- è¯»å–æŒä»“ä¿¡æ¯

**ä¸è¦**å¼€å¯ä»¥ä¸‹æƒé™ï¼š

- æç°æƒé™
- äº¤æ˜“æƒé™ï¼ˆé™¤ééœ€è¦ï¼‰

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIè¿æ¥å¤±è´¥**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤APIå¯†é’¥æƒé™è®¾ç½®

2. **æ²¡æœ‰äº¤æ˜“è®°å½•**
   - æ£€æŸ¥æ—¶é—´èŒƒå›´è®¾ç½®
   - ç¡®è®¤è´¦æˆ·æœ‰äº¤æ˜“è®°å½•
   - æ£€æŸ¥äº¤æ˜“å¯¹åç§°æ ¼å¼

3. **ä¾èµ–å®‰è£…å¤±è´¥**
   - æ›´æ–°pip: `pip install --upgrade pip`
   - ä½¿ç”¨å›½å†…é•œåƒæº: `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt`

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚
